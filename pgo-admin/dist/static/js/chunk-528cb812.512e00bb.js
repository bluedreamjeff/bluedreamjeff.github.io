(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-528cb812"],{"62c0":function(t,e,o){},"694b":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"index"},[o("el-container",[o("el-main",{attrs:{id:"test"}},[o("div",{staticClass:"test"},[o("div",{staticClass:"table"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[o("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[o("el-form-item",{attrs:{label:"用户钱包地址"}},[o("span",[t._v(t._s(e.row.user_address))])]),o("el-form-item",{attrs:{label:"公告标题"}},[o("span",[t._v(t._s(e.row.title))])]),o("el-form-item",{attrs:{label:"完整内容"}},[o("span",[t._v(t._s(e.row.comment))])])],1)]}}])}),o("el-table-column",{attrs:{label:"创建时间",prop:"created_at"}}),o("el-table-column",{attrs:{label:"最近更新",prop:"updated_at"}}),o("el-table-column",{attrs:{label:"标题","show-overflow-tooltip":!0,prop:"title"}}),o("el-table-column",{attrs:{label:"用户钱包地址","show-overflow-tooltip":!0,prop:"user_address"}}),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"内容",prop:"comment"}}),o("el-table-column",{attrs:{label:"置顶",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-switch",{on:{change:function(o){return t.isTop(e.$index,e.row)}},model:{value:e.row.is_top,callback:function(o){t.$set(e.row,"is_top",o)},expression:"scope.row.is_top"}})]}}])}),o("el-table-column",{attrs:{label:"是否启用",align:"center",prop:"status"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-switch",{on:{change:function(o){return t.isOpen(e.$index,e.row)}},model:{value:e.row.status,callback:function(o){t.$set(e.row,"status",o)},expression:"scope.row.status"}})]}}])}),o("el-table-column",{attrs:{label:"公告类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(1==e.row.type?"通知":"活动")+" ")]}}])}),o("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"header",fn:function(e){return[o("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:t.creat}},[t._v("新增")])]}},{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(o){return t.handleEdit(e.$index,e.row)}}},[t._v("修改")]),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),o("div",{staticClass:"pagination"},[o("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.page,total:1e3},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"prev-click":t.prev,"next-click":t.next}})],1),o("el-dialog",{attrs:{title:"add"===t.type?"新增公告":"修改公告",visible:t.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"标题"}},[o("el-input",{attrs:{placeholder:"公告的标题，必传参数"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),o("el-form-item",{attrs:{label:"用户钱包地址"}},[o("el-input",{attrs:{placeholder:"必传参数"},model:{value:t.form.user_address,callback:function(e){t.$set(t.form,"user_address",e)},expression:"form.user_address"}})],1),o("el-form-item",{attrs:{label:"内容"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:10},placeholder:"公告的内容，必传参数"},model:{value:t.form.comment,callback:function(e){t.$set(t.form,"comment",e)},expression:"form.comment"}})],1),o("el-form-item",{attrs:{label:"置顶"}},[o("el-switch",{model:{value:t.form.is_top,callback:function(e){t.$set(t.form,"is_top",e)},expression:"form.is_top"}})],1),o("el-form-item",{attrs:{label:"是否启用"}},[o("el-switch",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1),o("el-form-item",{attrs:{label:"公告类型"}},[o("el-select",{attrs:{placeholder:""},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[o("el-option",{attrs:{label:"通知",value:"1"}}),o("el-option",{attrs:{label:"活动",value:"2"}})],1)],1),o("el-form-item",{attrs:{label:"语言类型"}},[o("el-select",{attrs:{placeholder:"添加请选择语言类型"},model:{value:t.form.language,callback:function(e){t.$set(t.form,"language",e)},expression:"form.language"}},[o("el-option",{attrs:{label:"中文",value:"zh"}}),o("el-option",{attrs:{label:"英文",value:"en"}})],1)],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("提交")]),o("el-button",{on:{click:t.onCancel}},[t._v("取消")])],1)],1)],1)],1)])],1)],1)},n=[],s=o("5530"),l=o("3835"),i=(o("159b"),o("498a"),o("d3b7"),o("25f0"),{components:{},computed:{},data:function(){return{page:1,type:"",form:{language:"zh",user_address:"",title:"",type:"1",is_top:!1,status:!1,comment:""},formLabelWidth:"120px",dialogFormVisible:!1,tableData:[],search:""}},mounted:function(){var t=1;this.page=t,console.log(this.page),this.handleCurrentChange(t)},methods:{notify:function(t,e){switch(t){case 0:this.$notify.success({title:"公告管理",message:"".concat(e,"成功"),showClose:!1});break;case 1:this.$notify.error({title:"公告管理",message:"".concat(e,"失败"),showClose:!1});break;default:break}},getData:function(t,e){var o=this,a=this.$loading({lock:!0,text:"请求中"});this.$axiosBsc.post("/notice/getNFTData",{num:t,page:e}).then((function(t){a.close(),console.log(t);var e=t.data.data,n=Object(l["a"])(e,1),s=n[0];console.log(s),void 0==s?o.tableData=[]:(o.tableData=e[0],o.filtrationData())})).catch((function(t){console.log(t)}))},formInit:function(){this.form={user_address:"",title:"",type:"1",is_top:!1,status:!1,comment:"",language:"zh"}},filtrationData:function(){this.tableData.forEach((function(t){1==t.status?t.status=!0:t.status=!1,1==t.is_top?t.is_top=!0:t.is_top=!1}))},creat:function(){this.formInit(),this.dialogFormVisible=!0,this.type="add"},formHandel:function(){var t=this.form,e=this.$utils.delBlank,o=Object(s["a"])({},t);console.log(o),o.user_address=e(o.user_address),o.title=this.$.trim(o.title),o.comment=this.$.trim(o.comment);var a=o.user_address,n=o.title,l=o.comment,i=o.is_top,c=o.status,r=o.language;console.log(l),""===a||""===n||""===l||""===r?this.$message({message:"你有必选项未填",type:"warning"}):(o.is_top=i?1:0,o.status=c?1:0),console.log(o);var u=this.type;"add"===u?(console.log("添加"),this.addNotice(o)):(console.log("修改"),this.editNotice(o))},isTop:function(t,e){var o=Object(s["a"])({},e);o.is_top?o.is_top=1:o.is_top=0,console.log(o),this.upNotice(o)},isOpen:function(t,e){var o=Object(s["a"])({},e);o.status?o.status=1:o.status=0,console.log(o),this.openNotice(o)},delNotice:function(t){var e=this,o=this.page;this.$axiosBsc.post("/notice/delNFTData",t).then((function(t){e.notify(0,"删除公告"),e.handleCurrentChange(o)})).catch((function(t){console.log(t),e.notify(1,"删除公告")}))},openNotice:function(t){var e=this,o=this.$loading({lock:!0,text:"请求中"}),a=t.status;this.$axiosBsc.post("/notice/stsNFTData",t).then((function(t){console.log(t);var n="";n=1==a?"开启公告":"关闭",e.notify(0,n),o.close()})).catch((function(t){console.log(t);var n="";n=a?"开启公告":"关闭",e.notify(0,n),o.close()}))},upNotice:function(t){var e=this,o=this.$loading({lock:!0,text:"请求中"}),a=t.is_top;this.$axiosBsc.post("/notice/topNFTData",t).then((function(t){var n="";n=1==a?"置顶公告":"取消置顶",e.notify(0,n),o.close()})).catch((function(t){console.log(t);var n="";n=a?"置顶公告":"取消置顶公告",e.notify(0,n),o.close()}))},addNotice:function(t){var e=this,o=this.page;this.$axiosBsc.post("/notice/insNFTData",t).then((function(t){e.notify(0,"添加公告"),e.dialogFormVisible=!1,e.handleCurrentChange(o)})).catch((function(t){console.log(t),e.notify(1,"添加公告"),e.dialogFormVisible=!1}))},editNotice:function(t){var e=this;this.$axiosBsc.post("/notice/upNFTData",t).then((function(t){e.notify(0,"修改公告"),e.dialogFormVisible=!1;var o=e.page;e.handleCurrentChange(o)})).catch((function(t){console.log(t),e.notify(1,"修改公告"),e.dialogFormVisible=!1}))},onSubmit:function(){this.formHandel()},onCancel:function(){this.dialogFormVisible=!1},prev:function(t){},next:function(t){},handleSizeChange:function(t){console.log("每页 ".concat(t," 条"))},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.getData(10,t),this.page=t},handleEdit:function(t,e){console.log(e),e.type=e.type.toString(),this.dialogFormVisible=!0,this.form=Object(s["a"])({},e),this.type="edit"},handleDelete:function(t,e){var o=this;this.$confirm("此操作将删除该公告, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o.delNotice(e)})).catch((function(){o.$message({type:"info",message:"已取消删除"})}))}}}),c=Object(s["a"])({},i),r=c,u=(o("705f"),o("2877")),f=Object(u["a"])(r,a,n,!1,null,"5c3c3702",null);e["default"]=f.exports},"705f":function(t,e,o){"use strict";o("62c0")}}]);